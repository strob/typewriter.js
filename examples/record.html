<html>
  <head>
    <title>instrument</title>
    <script src="../jquery-1.8.2.min.js"></script>
    <script src="../typewriter.js"></script>
<style>
body{
  overflow:hidden;
  width: 100%;
  height: 100%;
  text-align: center;
}
#page {
  border: 2px solid black;
  width: 500px;
  height: 300px;
  margin-left: auto;
  margin-right: auto;
}
</style>
  </head>
  <body>
<div id="page"></div>
    <script>
var type = new TW.Typewriter("#page");
var $button = $("<button>")
    .text("replay")
    .click(function() { 
        // Hide the old lines
        type.$el.hide();
        var $replay = $("<div>")
            .css({position: "relative"})
            .insertBefore(type.$el);

        console.log("replay", $replay);

        var idx = 0;
        var next = function() {
            var line = type.lines[idx];
            var $rline = TW.replay_line(line.state, line.timing, line.x, line.y)
                .appendTo($replay);
            idx += 1;
            if(idx < type.lines.length) {
                window.setTimeout(next, line.duration);
            }
        }
        next();
    })
    .appendTo($("body"));
    </script>
  </body>
</html>
